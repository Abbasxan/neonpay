

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>) &mdash; NEONPAY 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="SECURITY.html" />
    <link rel="prev" title=")" href="API.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            NEONPAY
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Language Selection:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../en/index.html">NEONPAY Documentation (English)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../en/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ru/index.html">Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ NEONPAY (Ğ ÑƒÑÑĞºĞ¸Ğ¹)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ru/index.html#id4">Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ Ğ¸ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">NEONPAY SÉ™nÉ™dlÉ™ri (AzÉ™rbaycan)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="README.html">NEONPAY SÉ™nÉ™dlÉ™ri (AzÉ™rbaycan)</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html">)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id98">)</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#xususiyytlr">XÃ¼susiyyÉ™tlÉ™r</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#surtli-baslangic">SÃ¼rÉ™tli BaÅŸlanÄŸÄ±c</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#dstklnn-dillr">DÉ™stÉ™klÉ™nÉ™n DillÉ™r</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#indekslr-v-cdvllr">Ä°ndekslÉ™r vÉ™ CÉ™dvÉ™llÉ™r</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../en/README.html">NEONPAY Documentation (English)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../en/FAQ.html">)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../en/FAQ.html#id98">)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Documentation Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NEONPAY</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">NEONPAY SÉ™nÉ™dlÉ™ri (AzÉ™rbaycan)</a></li>
      <li class="breadcrumb-item active">)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/az/FAQ.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p># Tez-tez VerilÉ™n Suallar (FAQ) - NEONPAY</p>
<p>NEONPAY kitabxanasÄ± haqqÄ±nda tez-tez verilÉ™n suallar vÉ™ cavablar.</p>
<p>## MÃ¼ndÉ™ricat</p>
<ol class="arabic simple">
<li><p>[Ãœmumi Suallar](#Ã¼mumi-suallar)</p></li>
<li><p>[QuraÅŸdÄ±rma vÉ™ QuraÅŸdÄ±rma](#quraÅŸdÄ±rma-vÉ™-quraÅŸdÄ±rma)</p></li>
<li><p>[Ã–dÉ™niÅŸ EmalÄ±](#Ã¶dÉ™niÅŸ-emalÄ±)</p></li>
<li><p>[XÉ™ta Ä°darÉ™etmÉ™si](#xÉ™ta-idarÉ™etmÉ™si)</p></li>
<li><p>[TÉ™hlÃ¼kÉ™sizlik](#tÉ™hlÃ¼kÉ™sizlik)</p></li>
<li><p>[Ä°stehsal YerlÉ™ÅŸdirilmÉ™si](#istehsal-yerlÉ™ÅŸdirilmÉ™si)</p></li>
<li><p>[Problem HÉ™lli](#problem-hÉ™lli)</p></li>
</ol>
<p>## Ãœmumi Suallar</p>
<p>### NEONPAY nÉ™dir?</p>
<p>NEONPAY bot developerlÉ™ri Ã¼Ã§Ã¼n Telegram Stars Ã¶dÉ™niÅŸlÉ™rinin inteqrasiyasÄ±nÄ± sadÉ™lÉ™ÅŸdirÉ™n Python kitabxanasÄ±dÄ±r. O, Ã§oxlu bot kitabxanalarÄ± (Aiogram, Pyrogram, pyTelegramBotAPI vÉ™ s.) Ã¼Ã§Ã¼n vahid API tÉ™min edir vÉ™ Ã¶dÉ™niÅŸlÉ™ri avtomatik olaraq idarÉ™ edir.</p>
<p>### HansÄ± bot kitabxanalarÄ± dÉ™stÉ™klÉ™nir?</p>
<p>NEONPAY dÉ™stÉ™klÉ™yir:
- <strong>Aiogram</strong> (TÃ¶vsiyÉ™ olunur) - MÃ¼asir async kitabxana
- <strong>Pyrogram</strong> - MÉ™ÅŸhur MTProto kitabxana
- <strong>pyTelegramBotAPI</strong> - SadÉ™ sinxron kitabxana
- <strong>python-telegram-bot</strong> - HÉ™rtÉ™rÉ™fli kitabxana
- <strong>Raw Telegram Bot API</strong> - BirbaÅŸa HTTP sorÄŸularÄ±</p>
<p>### Telegram Stars nÉ™dir?</p>
<p>Telegram Stars istifadÉ™Ã§ilÉ™rin ala bilÉ™cÉ™yi vÉ™ botlarda rÉ™qÉ™msal mallar vÉ™ xidmÉ™tlÉ™r Ã¼Ã§Ã¼n Ã¶dÉ™niÅŸ etmÉ™k Ã¼Ã§Ã¼n istifadÉ™ edÉ™ bilÉ™cÉ™yi Telegram-Ä±n daxili virtual valyutasÄ±dÄ±r. O, Telegram tÉ™rÉ™findÉ™n rÉ™smi olaraq dÉ™stÉ™klÉ™nir vÉ™ problemsiz Ã¶dÉ™niÅŸ tÉ™crÃ¼bÉ™si tÉ™min edir.</p>
<p>### NEONPAY istifadÉ™ etmÉ™k pulsuzdur?</p>
<p>BÉ™li, NEONPAY tamamilÉ™ pulsuz vÉ™ aÃ§Ä±q mÉ™nbÉ™dir. Siz yalnÄ±z Telegram-Ä±n Stars Ã¶dÉ™niÅŸlÉ™rinin emalÄ± Ã¼Ã§Ã¼n komissiyasÄ±nÄ± Ã¶dÉ™yirsiniz (adÉ™tÉ™n É™mÉ™liyyat mÉ™blÉ™ÄŸinin 5%).</p>
<p>## QuraÅŸdÄ±rma vÉ™ QuraÅŸdÄ±rma</p>
<p>### NEONPAY-Ä± necÉ™ quraÅŸdÄ±rmaq olar?</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>bash
# Æsas quraÅŸdÄ±rma
pip install neonpay</p>
<p># XÃ¼susi bot kitabxanasÄ± ilÉ™
pip install neonpay aiogram  # Aiogram Ã¼Ã§Ã¼n
pip install neonpay pyrogram  # Pyrogram Ã¼Ã§Ã¼n
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p>### NecÉ™ tez baÅŸlamaq olar?</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>python
from neonpay.factory import create_neonpay
from neonpay.core import PaymentStage, PaymentStatus</p>
<p># Ä°nitializasiya
neonpay = create_neonpay(bot_instance=sizin_bot)</p>
<p># Ã–dÉ™niÅŸ mÉ™rhÉ™lÉ™si yaratmaq
stage = PaymentStage(</p>
<blockquote>
<div><p>title=â€Premium GiriÅŸâ€,
description=â€Premium funksiyalarÄ± aÃ§maqâ€,
price=25,  # 25 Telegram Stars</p>
</div></blockquote>
<p>)
neonpay.create_payment_stage(â€œpremiumâ€, stage)</p>
<p># Ã–dÉ™niÅŸlÉ™ri idarÉ™ etmÉ™k
&#64;neonpay.on_payment
async def handle_payment(result):</p>
<blockquote>
<div><dl class="simple">
<dt>if result.status == PaymentStatus.COMPLETED:</dt><dd><p>print(fâ€Ã–dÉ™niÅŸ alÄ±ndÄ±: {result.amount} ulduzâ€)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a></p>
<p>### Webhook quraÅŸdÄ±rmaq lazÄ±mdÄ±r?</p>
<p>Xeyr, NEONPAY dÉ™stÉ™klÉ™nÉ™n kitabxanalar Ã¼Ã§Ã¼n webhook konfiqurasiyasÄ±nÄ± avtomatik olaraq idarÉ™ edir. Raw API Ã¼Ã§Ã¼n webhook-u É™l ilÉ™ quraÅŸdÄ±rmaq lazÄ±mdÄ±r.</p>
<p>### DÃ¼zgÃ¼n bot kitabxanasÄ±nÄ± necÉ™ seÃ§mÉ™k olar?</p>
<p><strong>Yeni layihÉ™lÉ™r Ã¼Ã§Ã¼n:</strong> <strong>Aiogram</strong> istifadÉ™ edin - o mÃ¼asirdir, yaxÅŸÄ± sÉ™nÉ™dlÉ™ÅŸdirilmiÅŸdir vÉ™ É™la async dÉ™stÉ™yi var.</p>
<p><strong>MÃ¶vcud layihÉ™lÉ™r Ã¼Ã§Ã¼n:</strong> ArtÄ±q istifadÉ™ etdiyiniz kitabxanadan istifadÉ™ edin. NEONPAY bÃ¼tÃ¼n É™sas kitabxanalarla iÅŸlÉ™yir.</p>
<p>## Ã–dÉ™niÅŸ EmalÄ±</p>
<p>### MÃ¼xtÉ™lif Ã¶dÉ™niÅŸ variantlarÄ±nÄ± necÉ™ yaratmaq olar?</p>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a>python
# Donasiya variantlarÄ±
donation_stages = [</p>
<blockquote>
<div><p>PaymentStage(â€œDÉ™stÉ™k 1â­â€, â€œBotun iÅŸlÉ™mÉ™sinÉ™ kÃ¶mÉ™k etâ€, 1),
PaymentStage(â€œDÉ™stÉ™k 10â­â€, â€œÄ°nkiÅŸafa dÉ™stÉ™kâ€, 10),
PaymentStage(â€œDÉ™stÉ™k 50â­â€, â€œBÃ¶yÃ¼k dÉ™stÉ™kâ€, 50),</p>
</div></blockquote>
<p>]</p>
<p># RÉ™qÉ™msal mÉ™hsullar
product_stages = [</p>
<blockquote>
<div><p>PaymentStage(â€œPremium GiriÅŸâ€, â€œ30 gÃ¼n premiumâ€, 25),
PaymentStage(â€œXÃ¼susi Temaâ€, â€œFÉ™rdilÉ™ÅŸdirilmiÅŸ temaâ€, 15),</p>
</div></blockquote>
<p>]</p>
<p># BÃ¼tÃ¼n mÉ™rhÉ™lÉ™lÉ™ri É™lavÉ™ et
for i, stage in enumerate(donation_stages):</p>
<blockquote>
<div><p>neonpay.create_payment_stage(fâ€donate_{i}â€, stage)</p>
</div></blockquote>
<dl class="simple">
<dt>for i, stage in enumerate(product_stages):</dt><dd><p>neonpay.create_payment_stage(fâ€product_{i}â€, stage)</p>
</dd>
</dl>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a></p>
<p>### MÃ¼xtÉ™lif Ã¶dÉ™niÅŸ nÃ¶vlÉ™rini necÉ™ idarÉ™ etmÉ™k olar?</p>
<p><a href="#id25"><span class="problematic" id="id26">``</span></a><a href="#id27"><span class="problematic" id="id28">`</span></a>python
&#64;neonpay.on_payment
async def handle_payment(result):</p>
<blockquote>
<div><dl class="simple">
<dt>if result.status == PaymentStatus.COMPLETED:</dt><dd><dl class="simple">
<dt>if result.stage_id.startswith(â€<a href="#id175"><span class="problematic" id="id176">donate_</span></a>â€):</dt><dd><p># DonasiyanÄ± idarÉ™ et
await handle_donation(result)</p>
</dd>
<dt>elif result.stage_id.startswith(â€<a href="#id177"><span class="problematic" id="id178">product_</span></a>â€):</dt><dd><p># MÉ™hsul alÄ±ÅŸÄ±nÄ± idarÉ™ et
await handle_product_purchase(result)</p>
</dd>
<dt>else:</dt><dd><p># DigÉ™r Ã¶dÉ™niÅŸlÉ™ri idarÉ™ et
await handle_other_payment(result)</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p><a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id31"><span class="problematic" id="id32">`</span></a></p>
<p>### Ã–dÉ™niÅŸ mesajlarÄ±nÄ± fÉ™rdilÉ™ÅŸdirmÉ™k olarmÄ±?</p>
<p>BÉ™li, tÉ™ÅŸÉ™kkÃ¼r mesajÄ±nÄ± fÉ™rdilÉ™ÅŸdirÉ™ bilÉ™rsiniz:</p>
<p><a href="#id33"><span class="problematic" id="id34">``</span></a><a href="#id35"><span class="problematic" id="id36">`</span></a>python
neonpay = create_neonpay(</p>
<blockquote>
<div><p>bot_instance=bot,
thank_you_message=â€ğŸ‰ AlÄ±ÅŸÄ±nÄ±z Ã¼Ã§Ã¼n tÉ™ÅŸÉ™kkÃ¼rlÉ™r! MÉ™hsulunuz indi aktivdir.â€</p>
</div></blockquote>
<section id="id37">
<h1>)<a class="headerlink" href="#id37" title="Link to this heading">ïƒ</a></h1>
<p>### Ã–dÉ™niÅŸ mÉ™blÉ™ÄŸlÉ™rini necÉ™ doÄŸrulamaq olar?</p>
<p><a href="#id38"><span class="problematic" id="id39">``</span></a><a href="#id40"><span class="problematic" id="id41">`</span></a>python
&#64;neonpay.on_payment
async def handle_payment(result):</p>
<blockquote>
<div><p># Bu mÉ™rhÉ™lÉ™ Ã¼Ã§Ã¼n gÃ¶zlÉ™nilÉ™n mÉ™blÉ™ÄŸi al
stage = neonpay.get_payment_stage(result.stage_id)
expected_amount = stage.price</p>
<dl class="simple">
<dt>if result.amount != expected_amount:</dt><dd><p>logger.warning(fâ€MÉ™blÉ™ÄŸ uyÄŸunsuzluÄŸu: gÃ¶zlÉ™nilÉ™n {expected_amount}, alÄ±nan {result.amount}â€)
return</p>
</dd>
</dl>
<p># Ã–dÉ™niÅŸi emal et
await process_payment(result)</p>
</div></blockquote>
<p><a href="#id42"><span class="problematic" id="id43">``</span></a><a href="#id44"><span class="problematic" id="id45">`</span></a></p>
<p>## XÉ™ta Ä°darÉ™etmÉ™si</p>
<p>### Ã–dÉ™niÅŸ uÄŸursuz olsa nÉ™ baÅŸ verir?</p>
<p>NEONPAY avtomatik olaraq uÄŸursuz Ã¶dÉ™niÅŸlÉ™ri idarÉ™ edir vÉ™ É™traflÄ± xÉ™ta mÉ™lumatÄ± tÉ™min edir:</p>
<p><a href="#id46"><span class="problematic" id="id47">``</span></a><a href="#id48"><span class="problematic" id="id49">`</span></a>python
&#64;neonpay.on_payment
async def handle_payment(result):</p>
<blockquote>
<div><dl class="simple">
<dt>if result.status == PaymentStatus.COMPLETED:</dt><dd><p># Ã–dÉ™niÅŸ uÄŸurlu
await process_successful_payment(result)</p>
</dd>
<dt>elif result.status == PaymentStatus.FAILED:</dt><dd><p># Ã–dÉ™niÅŸ uÄŸursuz
await handle_payment_failure(result)</p>
</dd>
<dt>elif result.status == PaymentStatus.PENDING:</dt><dd><p># Ã–dÉ™niÅŸ gÃ¶zlÉ™yir
await handle_pending_payment(result)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id50"><span class="problematic" id="id51">``</span></a><a href="#id52"><span class="problematic" id="id53">`</span></a></p>
<p>### ÅÉ™bÉ™kÉ™ xÉ™talarÄ±nÄ± necÉ™ idarÉ™ etmÉ™k olar?</p>
<p><a href="#id54"><span class="problematic" id="id55">``</span></a><a href="#id56"><span class="problematic" id="id57">`</span></a>python
async def safe_send_payment(user_id: int, stage_id: str):</p>
<blockquote>
<div><dl class="simple">
<dt>try:</dt><dd><p>await neonpay.send_payment(user_id, stage_id)</p>
</dd>
<dt>except PaymentError as e:</dt><dd><p>logger.error(fâ€Ã–dÉ™niÅŸ xÉ™tasÄ±: {e}â€)
await bot.send_message(user_id, â€œÃ–dÉ™niÅŸ uÄŸursuz oldu. ZÉ™hmÉ™t olmasa yenidÉ™n cÉ™hd edin.â€)</p>
</dd>
<dt>except Exception as e:</dt><dd><p>logger.error(fâ€GÃ¶zlÉ™nilmÉ™z xÉ™ta: {e}â€)
await bot.send_message(user_id, â€œNÉ™sÉ™ sÉ™hv getdi. ZÉ™hmÉ™t olmasa sonra cÉ™hd edin.â€)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id58"><span class="problematic" id="id59">``</span></a><a href="#id60"><span class="problematic" id="id61">`</span></a></p>
<p>### Bot token etibarsÄ±zdÄ±rsa nÉ™ baÅŸ verir?</p>
<p>NEONPAY bot token etibarsÄ±zdÄ±rsa <cite>ConfigurationError</cite> yaradacaq:</p>
<p><a href="#id62"><span class="problematic" id="id63">``</span></a><a href="#id64"><span class="problematic" id="id65">`</span></a>python
try:</p>
<blockquote>
<div><p>neonpay = create_neonpay(bot_instance=bot)</p>
</div></blockquote>
<dl class="simple">
<dt>except ConfigurationError as e:</dt><dd><p>print(fâ€Konfiqurasiya xÉ™tasÄ±: {e}â€)
# Bot tokenÄ±nÄ±zÄ± yoxlayÄ±n</p>
</dd>
</dl>
<p><a href="#id66"><span class="problematic" id="id67">``</span></a><a href="#id68"><span class="problematic" id="id69">`</span></a></p>
<p>## TÉ™hlÃ¼kÉ™sizlik</p>
<p>### Bot tokenÄ±mÄ± necÉ™ qorumaq olar?</p>
<p>HeÃ§ vaxt tokenlarÄ± mÉ™nbÉ™ kodunda hardcode etmÉ™yin:</p>
<p><a href="#id70"><span class="problematic" id="id71">``</span></a><a href="#id72"><span class="problematic" id="id73">`</span></a>python
# âŒ YanlÄ±ÅŸ
BOT_TOKEN = â€œ1234567890:ABCdefGHIjklMNOpqrsTUVwxyzâ€</p>
<p># âœ… DÃ¼zgÃ¼n
import os
BOT_TOKEN = os.getenv(â€œBOT_TOKENâ€)
<a href="#id74"><span class="problematic" id="id75">``</span></a><a href="#id76"><span class="problematic" id="id77">`</span></a></p>
<p>### Ä°stifadÉ™Ã§i icazÉ™lÉ™rini necÉ™ doÄŸrulamaq olar?</p>
<p><a href="#id78"><span class="problematic" id="id79">``</span></a><a href="#id80"><span class="problematic" id="id81">`</span></a>python
async def safe_send_payment(user_id: int, stage_id: str):</p>
<blockquote>
<div><p># Ä°stifadÉ™Ã§inin Ã¶dÉ™niÅŸ edÉ™ bilÉ™cÉ™yini yoxlayÄ±n
if not await user_can_pay(user_id):</p>
<blockquote>
<div><p>await bot.send_message(user_id, â€œÃ–dÉ™niÅŸ etmÉ™k Ã¼Ã§Ã¼n icazÉ™niz yoxdur.â€)
return</p>
</div></blockquote>
<p># Ä°stifadÉ™Ã§inin Ã¶dÉ™niÅŸ limitinÉ™ Ã§atÄ±b-Ã§atmadÄ±ÄŸÄ±nÄ± yoxlayÄ±n
if await user_payment_limit_reached(user_id):</p>
<blockquote>
<div><p>await bot.send_message(user_id, â€œÃ–dÉ™niÅŸ limitinizÉ™ Ã§atdÄ±nÄ±z.â€)
return</p>
</div></blockquote>
<p># Ã–dÉ™niÅŸi gÃ¶ndÉ™rin
await neonpay.send_payment(user_id, stage_id)</p>
</div></blockquote>
<p><a href="#id82"><span class="problematic" id="id83">``</span></a><a href="#id84"><span class="problematic" id="id85">`</span></a></p>
<p>### Ã–dÉ™niÅŸ dolandÄ±rÄ±cÄ±lÄ±ÄŸÄ±nÄ± necÉ™ qarÅŸÄ±sÄ±nÄ± almaq olar?</p>
<p><a href="#id86"><span class="problematic" id="id87">``</span></a><a href="#id88"><span class="problematic" id="id89">`</span></a>python
class PaymentValidator:</p>
<blockquote>
<div><dl>
<dt>def __init__(self):</dt><dd><p>self.user_payments = defaultdict(list)
self.max_payments_per_hour = 5</p>
</dd>
<dt>async def validate_payment(self, user_id: int, stage_id: str) -&gt; bool:</dt><dd><p># Ã–dÉ™niÅŸ tezliyini yoxlayÄ±n
now = time.time()
recent_payments = [</p>
<blockquote>
<div><p>t for t in self.user_payments[user_id]
if now - t &lt; 3600  # Son saat</p>
</div></blockquote>
<p>]</p>
<dl class="simple">
<dt>if len(recent_payments) &gt;= self.max_payments_per_hour:</dt><dd><p>return False</p>
</dd>
</dl>
<p># ÅÃ¼bhÉ™li nÃ¼munÉ™lÉ™ri yoxlayÄ±n
if await self.is_suspicious_user(user_id):</p>
<blockquote>
<div><p>return False</p>
</div></blockquote>
<p>return True</p>
</dd>
<dt>async def record_payment(self, user_id: int):</dt><dd><p>self.user_payments[user_id].append(time.time())</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id90"><span class="problematic" id="id91">``</span></a><a href="#id92"><span class="problematic" id="id93">`</span></a></p>
<p>## Ä°stehsal YerlÉ™ÅŸdirilmÉ™si</p>
<p>### Ä°stehsala necÉ™ yerlÉ™ÅŸdirmÉ™k olar?</p>
<p>1. <strong>MÃ¼hit dÉ™yiÅŸÉ™nlÉ™rini istifadÉ™ edin:</strong>
<code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">import</span> <span class="pre">os</span>
<span class="pre">BOT_TOKEN</span> <span class="pre">=</span> <span class="pre">os.getenv(&quot;BOT_TOKEN&quot;)</span>
<span class="pre">DATABASE_URL</span> <span class="pre">=</span> <span class="pre">os.getenv(&quot;DATABASE_URL&quot;)</span>
<span class="pre">`</span></code></p>
<p>2. <strong>DÃ¼zgÃ¼n log quraÅŸdÄ±rÄ±n:</strong>
<a href="#id94"><span class="problematic" id="id95">``</span></a><a href="#id96"><span class="problematic" id="id97">`</span></a>python
import logging
logging.basicConfig(</p>
<blockquote>
<div><p>level=logging.INFO,
format=â€%(asctime)s - %(name)s - %(levelname)s - %(message)sâ€</p>
</div></blockquote>
</section>
<section id="id98">
<h1>)<a class="headerlink" href="#id98" title="Link to this heading">ïƒ</a></h1>
<p>3. <strong>Ä°stehsal verilÉ™nlÉ™r bazasÄ± istifadÉ™ edin:</strong>
<a href="#id99"><span class="problematic" id="id100">``</span></a><a href="#id101"><span class="problematic" id="id102">`</span></a>python
# YaddaÅŸda saxlanÄ±lanÄ± verilÉ™nlÉ™r bazasÄ± ilÉ™ É™vÉ™z edin
import asyncpg</p>
<dl>
<dt>async def store_payment(payment_data):</dt><dd><p>conn = await asyncpg.connect(DATABASE_URL)
await conn.execute(</p>
<blockquote>
<div><p>â€œINSERT INTO payments (user_id, amount, stage_id, created_at) VALUES ($1, $2, $3, NOW())â€,
payment_data[â€˜user_idâ€™], payment_data[â€˜amountâ€™], payment_data[â€˜stage_idâ€™]</p>
</div></blockquote>
<p>)
await conn.close()</p>
</dd>
</dl>
<p><a href="#id103"><span class="problematic" id="id104">``</span></a><a href="#id105"><span class="problematic" id="id106">`</span></a></p>
<p>### Ã–dÉ™niÅŸlÉ™ri necÉ™ monitor etmÉ™k olar?</p>
<p><a href="#id107"><span class="problematic" id="id108">``</span></a><a href="#id109"><span class="problematic" id="id110">`</span></a>python
class PaymentMonitor:</p>
<blockquote>
<div><dl>
<dt>def __init__(self):</dt><dd><p>self.payment_stats = defaultdict(int)</p>
</dd>
<dt>async def log_payment(self, result):</dt><dd><p>self.payment_stats[â€˜total_paymentsâ€™] += 1
self.payment_stats[â€˜total_amountâ€™] += result.amount</p>
<p># VerilÉ™nlÉ™r bazasÄ±na log
await self.store_payment_log(result)</p>
<p># YÃ¼ksÉ™k hÉ™cm Ã¼Ã§Ã¼n xÉ™bÉ™rdarlÄ±q gÃ¶ndÉ™rin
if self.payment_stats[â€˜total_paymentsâ€™] % 100 == 0:</p>
<blockquote>
<div><p>await self.send_volume_alert()</p>
</div></blockquote>
</dd>
<dt>async def get_stats(self):</dt><dd><p>return dict(self.payment_stats)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id111"><span class="problematic" id="id112">``</span></a><a href="#id113"><span class="problematic" id="id114">`</span></a></p>
<p>### YÃ¼ksÉ™k trafiki necÉ™ idarÉ™ etmÉ™k olar?</p>
<p><a href="#id115"><span class="problematic" id="id116">``</span></a><a href="#id117"><span class="problematic" id="id118">`</span></a>python
# ÆlaqÉ™ hovuzu istifadÉ™ edin
import asyncpg</p>
<dl>
<dt>class DatabasePool:</dt><dd><dl>
<dt>def __init__(self, database_url: str):</dt><dd><p>self.pool = None
self.database_url = database_url</p>
</dd>
<dt>async def initialize(self):</dt><dd><dl class="simple">
<dt>self.pool = await asyncpg.create_pool(</dt><dd><p>self.database_url,
min_size=10,
max_size=20</p>
</dd>
</dl>
<p>)</p>
</dd>
<dt>async def execute(self, query, <a href="#id119"><span class="problematic" id="id120">*</span></a>args):</dt><dd><dl class="simple">
<dt>async with self.pool.acquire() as conn:</dt><dd><p>return await conn.execute(query, <a href="#id121"><span class="problematic" id="id122">*</span></a>args)</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id123"><span class="problematic" id="id124">``</span></a><a href="#id125"><span class="problematic" id="id126">`</span></a></p>
<p>## Problem HÉ™lli</p>
<p>### Ã–dÉ™niÅŸ gÃ¶ndÉ™rilmir</p>
<p><strong>YoxlayÄ±n:</strong>
1. Bot token etibarlÄ±dÄ±r
2. Ä°stifadÉ™Ã§i botu baÅŸlatÄ±b
3. Ã–dÉ™niÅŸ mÉ™rhÉ™lÉ™si mÃ¶vcuddur
4. Ä°stifadÉ™Ã§i ID dÃ¼zgÃ¼ndÃ¼r</p>
<p><a href="#id127"><span class="problematic" id="id128">``</span></a><a href="#id129"><span class="problematic" id="id130">`</span></a>python
# Ã–dÉ™niÅŸ gÃ¶ndÉ™rmÉ™ni debug et
async def debug_send_payment(user_id: int, stage_id: str):</p>
<blockquote>
<div><p># MÉ™rhÉ™lÉ™nin mÃ¶vcud olduÄŸunu yoxlayÄ±n
stage = neonpay.get_payment_stage(stage_id)
if not stage:</p>
<blockquote>
<div><p>print(fâ€MÉ™rhÉ™lÉ™ {stage_id} tapÄ±lmadÄ±â€)
return</p>
</div></blockquote>
<p># Ä°stifadÉ™Ã§inin mÃ¶vcud olduÄŸunu yoxlayÄ±n
try:</p>
<blockquote>
<div><p>user = await bot.get_chat(user_id)
print(fâ€Ä°stifadÉ™Ã§i tapÄ±ldÄ±: {user.first_name}â€)</p>
</div></blockquote>
<dl class="simple">
<dt>except Exception as e:</dt><dd><p>print(fâ€Ä°stifadÉ™Ã§i tapÄ±lmadÄ±: {e}â€)
return</p>
</dd>
</dl>
<p># Ã–dÉ™niÅŸi gÃ¶ndÉ™rin
try:</p>
<blockquote>
<div><p>await neonpay.send_payment(user_id, stage_id)
print(â€œÃ–dÉ™niÅŸ uÄŸurla gÃ¶ndÉ™rildiâ€)</p>
</div></blockquote>
<dl class="simple">
<dt>except Exception as e:</dt><dd><p>print(fâ€Ã–dÉ™niÅŸ uÄŸursuz oldu: {e}â€)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id131"><span class="problematic" id="id132">``</span></a><a href="#id133"><span class="problematic" id="id134">`</span></a></p>
<p>### Ã–dÉ™niÅŸ callback iÅŸlÉ™mir</p>
<p><strong>YoxlayÄ±n:</strong>
1. <cite>&#64;neonpay.on_payment</cite> dekoratoru dÃ¼zgÃ¼n tÉ™tbiq edilib
2. Funksiya async-dir
3. Bot iÅŸlÉ™yir vÉ™ yenilÉ™mÉ™lÉ™ri alÄ±r</p>
<p><a href="#id135"><span class="problematic" id="id136">``</span></a><a href="#id137"><span class="problematic" id="id138">`</span></a>python
# Ã–dÉ™niÅŸ callback testi
&#64;neonpay.on_payment
async def test_payment_handler(result):</p>
<blockquote>
<div><p>print(fâ€Ã–dÉ™niÅŸ callback iÅŸÉ™ dÃ¼ÅŸdÃ¼: {result}â€)
# Debug Ã¼Ã§Ã¼n burada breakpoint É™lavÉ™ edin</p>
</div></blockquote>
<p><a href="#id139"><span class="problematic" id="id140">``</span></a><a href="#id141"><span class="problematic" id="id142">`</span></a></p>
<p>### Bot É™mrlÉ™rÉ™ cavab vermir</p>
<p><strong>YoxlayÄ±n:</strong>
1. Bot token dÃ¼zgÃ¼ndÃ¼r
2. Bot iÅŸlÉ™yir
3. ÆmrlÉ™r dÃ¼zgÃ¼n qeydiyyatdan keÃ§ib
4. ÅÉ™bÉ™kÉ™ baÄŸlantÄ±sÄ±</p>
<p><a href="#id143"><span class="problematic" id="id144">``</span></a><a href="#id145"><span class="problematic" id="id146">`</span></a>python
# Bot baÄŸlantÄ±sÄ±nÄ± test et
async def test_bot():</p>
<blockquote>
<div><dl class="simple">
<dt>try:</dt><dd><p>me = await bot.get_me()
print(fâ€Bot iÅŸlÉ™yir: {me.first_name}â€)</p>
</dd>
<dt>except Exception as e:</dt><dd><p>print(fâ€Bot baÄŸlantÄ±sÄ± uÄŸursuz oldu: {e}â€)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id147"><span class="problematic" id="id148">``</span></a><a href="#id149"><span class="problematic" id="id150">`</span></a></p>
<p>### VerilÉ™nlÉ™r bazasÄ± baÄŸlantÄ± problemlÉ™ri</p>
<p><a href="#id151"><span class="problematic" id="id152">``</span></a><a href="#id153"><span class="problematic" id="id154">`</span></a>python
# VerilÉ™nlÉ™r bazasÄ± baÄŸlantÄ±sÄ±nÄ± test et
async def test_database():</p>
<blockquote>
<div><dl class="simple">
<dt>try:</dt><dd><p>conn = await asyncpg.connect(DATABASE_URL)
result = await conn.fetchval(â€œSELECT 1â€)
print(fâ€VerilÉ™nlÉ™r bazasÄ± baÄŸlandÄ±: {result}â€)
await conn.close()</p>
</dd>
<dt>except Exception as e:</dt><dd><p>print(fâ€VerilÉ™nlÉ™r bazasÄ± baÄŸlantÄ±sÄ± uÄŸursuz oldu: {e}â€)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id155"><span class="problematic" id="id156">``</span></a><a href="#id157"><span class="problematic" id="id158">`</span></a></p>
<p>## Ãœmumi ProblemlÉ™r</p>
<p>### â€œÃ–dÉ™niÅŸ mÉ™rhÉ™lÉ™si tapÄ±lmadÄ±â€</p>
<p>Bu, mÃ¶vcud olmayan mÉ™rhÉ™lÉ™ Ã¼Ã§Ã¼n Ã¶dÉ™niÅŸ gÃ¶ndÉ™rmÉ™yÉ™ Ã§alÄ±ÅŸdÄ±ÄŸÄ±nÄ±zda baÅŸ verir:</p>
<p><a href="#id159"><span class="problematic" id="id160">``</span></a><a href="#id161"><span class="problematic" id="id162">`</span></a>python
# MÃ¶vcud mÉ™rhÉ™lÉ™lÉ™ri yoxlayÄ±n
stages = neonpay.list_payment_stages()
print(fâ€MÃ¶vcud mÉ™rhÉ™lÉ™lÉ™r: {list(stages.keys())}â€)</p>
<p># ÆgÉ™r Ã§atÄ±ÅŸmÄ±rsa mÉ™rhÉ™lÉ™ yaradÄ±n
if â€œpremiumâ€ not in stages:</p>
<blockquote>
<div><p>stage = PaymentStage(â€œPremiumâ€, â€œPremium giriÅŸâ€, 25)
neonpay.create_payment_stage(â€œpremiumâ€, stage)</p>
</div></blockquote>
<p><a href="#id163"><span class="problematic" id="id164">``</span></a><a href="#id165"><span class="problematic" id="id166">`</span></a></p>
<p>### â€œÄ°nvoice gÃ¶ndÉ™rmÉ™k uÄŸursuz olduâ€</p>
<p>Bu adÉ™tÉ™n demÉ™kdir:
1. Bot token etibarsÄ±zdÄ±r
2. Ä°stifadÉ™Ã§i botu baÅŸlatmayÄ±b
3. Ä°stifadÉ™Ã§i ID yanlÄ±ÅŸdÄ±r</p>
<p><a href="#id167"><span class="problematic" id="id168">``</span></a><a href="#id169"><span class="problematic" id="id170">`</span></a>python
# Invoice gÃ¶ndÉ™rmÉ™ni debug et
async def debug_invoice(user_id: int, stage_id: str):</p>
<blockquote>
<div><dl>
<dt>try:</dt><dd><p># Bot mÉ™lumatlarÄ±nÄ± yoxlayÄ±n
me = await bot.get_me()
print(fâ€Bot: {me.first_name} (&#64;{me.username})â€)</p>
<p># Ä°stifadÉ™Ã§ini yoxlayÄ±n
user = await bot.get_chat(user_id)
print(fâ€Ä°stifadÉ™Ã§i: {user.first_name} (&#64;{user.username})â€)</p>
<p># Ã–dÉ™niÅŸi gÃ¶ndÉ™rin
await neonpay.send_payment(user_id, stage_id)</p>
</dd>
<dt>except Exception as e:</dt><dd><p>print(fâ€XÉ™ta: {e}â€)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id171"><span class="problematic" id="id172">``</span></a><a href="#id173"><span class="problematic" id="id174">`</span></a></p>
<p>### â€œÃ–dÉ™niÅŸ callback iÅŸÉ™ dÃ¼ÅŸmÃ¼râ€</p>
<p>Æmin olun ki:
1. Funksiya <cite>&#64;neonpay.on_payment</cite> ilÉ™ dekorasiya edilib
2. Funksiya async-dir
3. Bot yenilÉ™mÉ™lÉ™ri alÄ±r</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">#</span> <span class="pre">Callback</span> <span class="pre">qeydiyyatÄ±nÄ±</span> <span class="pre">test</span> <span class="pre">et</span>
<span class="pre">stats</span> <span class="pre">=</span> <span class="pre">neonpay.get_stats()</span>
<span class="pre">print(f&quot;Callbacks</span> <span class="pre">qeydiyyatdan</span> <span class="pre">keÃ§ib:</span> <span class="pre">{stats['registered_callbacks']}&quot;)</span>
<span class="pre">`</span></code></p>
<p>## KÃ¶mÉ™k Almaq</p>
<p>### Haradan kÃ¶mÉ™k ala bilÉ™rÉ™m?</p>
<ol class="arabic simple">
<li><p><strong>SÉ™nÉ™dlÉ™ÅŸmÉ™</strong>: [examples](../../examples/) qovluÄŸunu yoxlayÄ±n</p></li>
<li><p><strong>Ä°cma</strong>: [Telegram icmamÄ±za](<a class="reference external" href="https://t.me/neonpay_community">https://t.me/neonpay_community</a>) qoÅŸulun</p></li>
<li><p><strong>ProblemlÉ™r</strong>: [GitHub-da](<a class="reference external" href="https://github.com/Abbasxan/neonpay/issues">https://github.com/Abbasxan/neonpay/issues</a>) issue aÃ§Ä±n</p></li>
<li><p><strong>Email</strong>: [<a class="reference external" href="mailto:support&#37;&#52;&#48;neonpay&#46;com">support<span>&#64;</span>neonpay<span>&#46;</span>com</a>](<a class="reference external" href="mailto:support&#37;&#52;&#48;neonpay&#46;com">mailto:support<span>&#64;</span>neonpay<span>&#46;</span>com</a>) Ã¼nvanÄ±ndan dÉ™stÉ™klÉ™ É™laqÉ™ saxlayÄ±n</p></li>
</ol>
<p>### XÉ™talarÄ± necÉ™ bildirmÉ™k olar?</p>
<p>XÉ™talarÄ± bildirÉ™rkÉ™n, zÉ™hmÉ™t olmasa daxil edin:
1. Python versiyasÄ±
2. NEONPAY versiyasÄ±
3. Bot kitabxanasÄ± vÉ™ versiyasÄ±
4. XÉ™ta mesajÄ± vÉ™ stack trace
5. TÉ™krar etmÉ™k Ã¼Ã§Ã¼n addÄ±mlar</p>
<p>### FunksiyalarÄ± necÉ™ tÉ™lÉ™b etmÉ™k olar?</p>
<p>Funksiya tÉ™lÉ™blÉ™ri xoÅŸ gÉ™linir! ZÉ™hmÉ™t olmasa:
1. FunksiyanÄ±n artÄ±q mÃ¶vcud olub-olmadÄ±ÄŸÄ±nÄ± yoxlayÄ±n
2. Ä°stifadÉ™ halÄ±nÄ± tÉ™svir edin
3. MÃ¼mkÃ¼nsÉ™ nÃ¼munÉ™ kod tÉ™qdim edin
4. GitHub-da issue aÃ§Ä±n</p>
<p>â€”</p>
<p><strong>HÉ™lÉ™ dÉ™ suallarÄ±nÄ±z var? [examples](../../examples/) qovluÄŸunu yoxlayÄ±n vÉ™ ya dÉ™stÉ™klÉ™ É™laqÉ™ saxlayÄ±n!</strong></p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="API.html" class="btn btn-neutral float-left" title=")" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="SECURITY.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, NEONPAY Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>