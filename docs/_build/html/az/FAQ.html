

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>) &mdash; NEONPAY 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="SECURITY.html" />
    <link rel="prev" title=")" href="API.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            NEONPAY
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Language Selection:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../en/index.html">NEONPAY Documentation (English)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../en/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ru/index.html">Документация NEONPAY (Русский)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ru/index.html#id4">Индексы и таблицы</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">NEONPAY Sənədləri (Azərbaycan)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="README.html">NEONPAY Sənədləri (Azərbaycan)</a></li>
<li class="toctree-l2"><a class="reference internal" href="API.html">)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id98">)</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#xususiyytlr">Xüsusiyyətlər</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#surtli-baslangic">Sürətli Başlanğıc</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#dstklnn-dillr">Dəstəklənən Dillər</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#indekslr-v-cdvllr">İndekslər və Cədvəllər</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../en/README.html">NEONPAY Documentation (English)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../en/FAQ.html">)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../en/FAQ.html#id98">)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Documentation Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NEONPAY</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">NEONPAY Sənədləri (Azərbaycan)</a></li>
      <li class="breadcrumb-item active">)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/az/FAQ.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p># Tez-tez Verilən Suallar (FAQ) - NEONPAY</p>
<p>NEONPAY kitabxanası haqqında tez-tez verilən suallar və cavablar.</p>
<p>## Mündəricat</p>
<ol class="arabic simple">
<li><p>[Ümumi Suallar](#ümumi-suallar)</p></li>
<li><p>[Quraşdırma və Quraşdırma](#quraşdırma-və-quraşdırma)</p></li>
<li><p>[Ödəniş Emalı](#ödəniş-emalı)</p></li>
<li><p>[Xəta İdarəetməsi](#xəta-idarəetməsi)</p></li>
<li><p>[Təhlükəsizlik](#təhlükəsizlik)</p></li>
<li><p>[İstehsal Yerləşdirilməsi](#istehsal-yerləşdirilməsi)</p></li>
<li><p>[Problem Həlli](#problem-həlli)</p></li>
</ol>
<p>## Ümumi Suallar</p>
<p>### NEONPAY nədir?</p>
<p>NEONPAY bot developerləri üçün Telegram Stars ödənişlərinin inteqrasiyasını sadələşdirən Python kitabxanasıdır. O, çoxlu bot kitabxanaları (Aiogram, Pyrogram, pyTelegramBotAPI və s.) üçün vahid API təmin edir və ödənişləri avtomatik olaraq idarə edir.</p>
<p>### Hansı bot kitabxanaları dəstəklənir?</p>
<p>NEONPAY dəstəkləyir:
- <strong>Aiogram</strong> (Tövsiyə olunur) - Müasir async kitabxana
- <strong>Pyrogram</strong> - Məşhur MTProto kitabxana
- <strong>pyTelegramBotAPI</strong> - Sadə sinxron kitabxana
- <strong>python-telegram-bot</strong> - Hərtərəfli kitabxana
- <strong>Raw Telegram Bot API</strong> - Birbaşa HTTP sorğuları</p>
<p>### Telegram Stars nədir?</p>
<p>Telegram Stars istifadəçilərin ala biləcəyi və botlarda rəqəmsal mallar və xidmətlər üçün ödəniş etmək üçün istifadə edə biləcəyi Telegram-ın daxili virtual valyutasıdır. O, Telegram tərəfindən rəsmi olaraq dəstəklənir və problemsiz ödəniş təcrübəsi təmin edir.</p>
<p>### NEONPAY istifadə etmək pulsuzdur?</p>
<p>Bəli, NEONPAY tamamilə pulsuz və açıq mənbədir. Siz yalnız Telegram-ın Stars ödənişlərinin emalı üçün komissiyasını ödəyirsiniz (adətən əməliyyat məbləğinin 5%).</p>
<p>## Quraşdırma və Quraşdırma</p>
<p>### NEONPAY-ı necə quraşdırmaq olar?</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>bash
# Əsas quraşdırma
pip install neonpay</p>
<p># Xüsusi bot kitabxanası ilə
pip install neonpay aiogram  # Aiogram üçün
pip install neonpay pyrogram  # Pyrogram üçün
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p>### Necə tez başlamaq olar?</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>python
from neonpay.factory import create_neonpay
from neonpay.core import PaymentStage, PaymentStatus</p>
<p># İnitializasiya
neonpay = create_neonpay(bot_instance=sizin_bot)</p>
<p># Ödəniş mərhələsi yaratmaq
stage = PaymentStage(</p>
<blockquote>
<div><p>title=”Premium Giriş”,
description=”Premium funksiyaları açmaq”,
price=25,  # 25 Telegram Stars</p>
</div></blockquote>
<p>)
neonpay.create_payment_stage(“premium”, stage)</p>
<p># Ödənişləri idarə etmək
&#64;neonpay.on_payment
async def handle_payment(result):</p>
<blockquote>
<div><dl class="simple">
<dt>if result.status == PaymentStatus.COMPLETED:</dt><dd><p>print(f”Ödəniş alındı: {result.amount} ulduz”)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a></p>
<p>### Webhook quraşdırmaq lazımdır?</p>
<p>Xeyr, NEONPAY dəstəklənən kitabxanalar üçün webhook konfiqurasiyasını avtomatik olaraq idarə edir. Raw API üçün webhook-u əl ilə quraşdırmaq lazımdır.</p>
<p>### Düzgün bot kitabxanasını necə seçmək olar?</p>
<p><strong>Yeni layihələr üçün:</strong> <strong>Aiogram</strong> istifadə edin - o müasirdir, yaxşı sənədləşdirilmişdir və əla async dəstəyi var.</p>
<p><strong>Mövcud layihələr üçün:</strong> Artıq istifadə etdiyiniz kitabxanadan istifadə edin. NEONPAY bütün əsas kitabxanalarla işləyir.</p>
<p>## Ödəniş Emalı</p>
<p>### Müxtəlif ödəniş variantlarını necə yaratmaq olar?</p>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a>python
# Donasiya variantları
donation_stages = [</p>
<blockquote>
<div><p>PaymentStage(“Dəstək 1⭐”, “Botun işləməsinə kömək et”, 1),
PaymentStage(“Dəstək 10⭐”, “İnkişafa dəstək”, 10),
PaymentStage(“Dəstək 50⭐”, “Böyük dəstək”, 50),</p>
</div></blockquote>
<p>]</p>
<p># Rəqəmsal məhsullar
product_stages = [</p>
<blockquote>
<div><p>PaymentStage(“Premium Giriş”, “30 gün premium”, 25),
PaymentStage(“Xüsusi Tema”, “Fərdiləşdirilmiş tema”, 15),</p>
</div></blockquote>
<p>]</p>
<p># Bütün mərhələləri əlavə et
for i, stage in enumerate(donation_stages):</p>
<blockquote>
<div><p>neonpay.create_payment_stage(f”donate_{i}”, stage)</p>
</div></blockquote>
<dl class="simple">
<dt>for i, stage in enumerate(product_stages):</dt><dd><p>neonpay.create_payment_stage(f”product_{i}”, stage)</p>
</dd>
</dl>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a></p>
<p>### Müxtəlif ödəniş növlərini necə idarə etmək olar?</p>
<p><a href="#id25"><span class="problematic" id="id26">``</span></a><a href="#id27"><span class="problematic" id="id28">`</span></a>python
&#64;neonpay.on_payment
async def handle_payment(result):</p>
<blockquote>
<div><dl class="simple">
<dt>if result.status == PaymentStatus.COMPLETED:</dt><dd><dl class="simple">
<dt>if result.stage_id.startswith(”<a href="#id175"><span class="problematic" id="id176">donate_</span></a>”):</dt><dd><p># Donasiyanı idarə et
await handle_donation(result)</p>
</dd>
<dt>elif result.stage_id.startswith(”<a href="#id177"><span class="problematic" id="id178">product_</span></a>”):</dt><dd><p># Məhsul alışını idarə et
await handle_product_purchase(result)</p>
</dd>
<dt>else:</dt><dd><p># Digər ödənişləri idarə et
await handle_other_payment(result)</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p><a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id31"><span class="problematic" id="id32">`</span></a></p>
<p>### Ödəniş mesajlarını fərdiləşdirmək olarmı?</p>
<p>Bəli, təşəkkür mesajını fərdiləşdirə bilərsiniz:</p>
<p><a href="#id33"><span class="problematic" id="id34">``</span></a><a href="#id35"><span class="problematic" id="id36">`</span></a>python
neonpay = create_neonpay(</p>
<blockquote>
<div><p>bot_instance=bot,
thank_you_message=”🎉 Alışınız üçün təşəkkürlər! Məhsulunuz indi aktivdir.”</p>
</div></blockquote>
<section id="id37">
<h1>)<a class="headerlink" href="#id37" title="Link to this heading"></a></h1>
<p>### Ödəniş məbləğlərini necə doğrulamaq olar?</p>
<p><a href="#id38"><span class="problematic" id="id39">``</span></a><a href="#id40"><span class="problematic" id="id41">`</span></a>python
&#64;neonpay.on_payment
async def handle_payment(result):</p>
<blockquote>
<div><p># Bu mərhələ üçün gözlənilən məbləği al
stage = neonpay.get_payment_stage(result.stage_id)
expected_amount = stage.price</p>
<dl class="simple">
<dt>if result.amount != expected_amount:</dt><dd><p>logger.warning(f”Məbləğ uyğunsuzluğu: gözlənilən {expected_amount}, alınan {result.amount}”)
return</p>
</dd>
</dl>
<p># Ödənişi emal et
await process_payment(result)</p>
</div></blockquote>
<p><a href="#id42"><span class="problematic" id="id43">``</span></a><a href="#id44"><span class="problematic" id="id45">`</span></a></p>
<p>## Xəta İdarəetməsi</p>
<p>### Ödəniş uğursuz olsa nə baş verir?</p>
<p>NEONPAY avtomatik olaraq uğursuz ödənişləri idarə edir və ətraflı xəta məlumatı təmin edir:</p>
<p><a href="#id46"><span class="problematic" id="id47">``</span></a><a href="#id48"><span class="problematic" id="id49">`</span></a>python
&#64;neonpay.on_payment
async def handle_payment(result):</p>
<blockquote>
<div><dl class="simple">
<dt>if result.status == PaymentStatus.COMPLETED:</dt><dd><p># Ödəniş uğurlu
await process_successful_payment(result)</p>
</dd>
<dt>elif result.status == PaymentStatus.FAILED:</dt><dd><p># Ödəniş uğursuz
await handle_payment_failure(result)</p>
</dd>
<dt>elif result.status == PaymentStatus.PENDING:</dt><dd><p># Ödəniş gözləyir
await handle_pending_payment(result)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id50"><span class="problematic" id="id51">``</span></a><a href="#id52"><span class="problematic" id="id53">`</span></a></p>
<p>### Şəbəkə xətalarını necə idarə etmək olar?</p>
<p><a href="#id54"><span class="problematic" id="id55">``</span></a><a href="#id56"><span class="problematic" id="id57">`</span></a>python
async def safe_send_payment(user_id: int, stage_id: str):</p>
<blockquote>
<div><dl class="simple">
<dt>try:</dt><dd><p>await neonpay.send_payment(user_id, stage_id)</p>
</dd>
<dt>except PaymentError as e:</dt><dd><p>logger.error(f”Ödəniş xətası: {e}”)
await bot.send_message(user_id, “Ödəniş uğursuz oldu. Zəhmət olmasa yenidən cəhd edin.”)</p>
</dd>
<dt>except Exception as e:</dt><dd><p>logger.error(f”Gözlənilməz xəta: {e}”)
await bot.send_message(user_id, “Nəsə səhv getdi. Zəhmət olmasa sonra cəhd edin.”)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id58"><span class="problematic" id="id59">``</span></a><a href="#id60"><span class="problematic" id="id61">`</span></a></p>
<p>### Bot token etibarsızdırsa nə baş verir?</p>
<p>NEONPAY bot token etibarsızdırsa <cite>ConfigurationError</cite> yaradacaq:</p>
<p><a href="#id62"><span class="problematic" id="id63">``</span></a><a href="#id64"><span class="problematic" id="id65">`</span></a>python
try:</p>
<blockquote>
<div><p>neonpay = create_neonpay(bot_instance=bot)</p>
</div></blockquote>
<dl class="simple">
<dt>except ConfigurationError as e:</dt><dd><p>print(f”Konfiqurasiya xətası: {e}”)
# Bot tokenınızı yoxlayın</p>
</dd>
</dl>
<p><a href="#id66"><span class="problematic" id="id67">``</span></a><a href="#id68"><span class="problematic" id="id69">`</span></a></p>
<p>## Təhlükəsizlik</p>
<p>### Bot tokenımı necə qorumaq olar?</p>
<p>Heç vaxt tokenları mənbə kodunda hardcode etməyin:</p>
<p><a href="#id70"><span class="problematic" id="id71">``</span></a><a href="#id72"><span class="problematic" id="id73">`</span></a>python
# ❌ Yanlış
BOT_TOKEN = “1234567890:ABCdefGHIjklMNOpqrsTUVwxyz”</p>
<p># ✅ Düzgün
import os
BOT_TOKEN = os.getenv(“BOT_TOKEN”)
<a href="#id74"><span class="problematic" id="id75">``</span></a><a href="#id76"><span class="problematic" id="id77">`</span></a></p>
<p>### İstifadəçi icazələrini necə doğrulamaq olar?</p>
<p><a href="#id78"><span class="problematic" id="id79">``</span></a><a href="#id80"><span class="problematic" id="id81">`</span></a>python
async def safe_send_payment(user_id: int, stage_id: str):</p>
<blockquote>
<div><p># İstifadəçinin ödəniş edə biləcəyini yoxlayın
if not await user_can_pay(user_id):</p>
<blockquote>
<div><p>await bot.send_message(user_id, “Ödəniş etmək üçün icazəniz yoxdur.”)
return</p>
</div></blockquote>
<p># İstifadəçinin ödəniş limitinə çatıb-çatmadığını yoxlayın
if await user_payment_limit_reached(user_id):</p>
<blockquote>
<div><p>await bot.send_message(user_id, “Ödəniş limitinizə çatdınız.”)
return</p>
</div></blockquote>
<p># Ödənişi göndərin
await neonpay.send_payment(user_id, stage_id)</p>
</div></blockquote>
<p><a href="#id82"><span class="problematic" id="id83">``</span></a><a href="#id84"><span class="problematic" id="id85">`</span></a></p>
<p>### Ödəniş dolandırıcılığını necə qarşısını almaq olar?</p>
<p><a href="#id86"><span class="problematic" id="id87">``</span></a><a href="#id88"><span class="problematic" id="id89">`</span></a>python
class PaymentValidator:</p>
<blockquote>
<div><dl>
<dt>def __init__(self):</dt><dd><p>self.user_payments = defaultdict(list)
self.max_payments_per_hour = 5</p>
</dd>
<dt>async def validate_payment(self, user_id: int, stage_id: str) -&gt; bool:</dt><dd><p># Ödəniş tezliyini yoxlayın
now = time.time()
recent_payments = [</p>
<blockquote>
<div><p>t for t in self.user_payments[user_id]
if now - t &lt; 3600  # Son saat</p>
</div></blockquote>
<p>]</p>
<dl class="simple">
<dt>if len(recent_payments) &gt;= self.max_payments_per_hour:</dt><dd><p>return False</p>
</dd>
</dl>
<p># Şübhəli nümunələri yoxlayın
if await self.is_suspicious_user(user_id):</p>
<blockquote>
<div><p>return False</p>
</div></blockquote>
<p>return True</p>
</dd>
<dt>async def record_payment(self, user_id: int):</dt><dd><p>self.user_payments[user_id].append(time.time())</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id90"><span class="problematic" id="id91">``</span></a><a href="#id92"><span class="problematic" id="id93">`</span></a></p>
<p>## İstehsal Yerləşdirilməsi</p>
<p>### İstehsala necə yerləşdirmək olar?</p>
<p>1. <strong>Mühit dəyişənlərini istifadə edin:</strong>
<code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">import</span> <span class="pre">os</span>
<span class="pre">BOT_TOKEN</span> <span class="pre">=</span> <span class="pre">os.getenv(&quot;BOT_TOKEN&quot;)</span>
<span class="pre">DATABASE_URL</span> <span class="pre">=</span> <span class="pre">os.getenv(&quot;DATABASE_URL&quot;)</span>
<span class="pre">`</span></code></p>
<p>2. <strong>Düzgün log quraşdırın:</strong>
<a href="#id94"><span class="problematic" id="id95">``</span></a><a href="#id96"><span class="problematic" id="id97">`</span></a>python
import logging
logging.basicConfig(</p>
<blockquote>
<div><p>level=logging.INFO,
format=”%(asctime)s - %(name)s - %(levelname)s - %(message)s”</p>
</div></blockquote>
</section>
<section id="id98">
<h1>)<a class="headerlink" href="#id98" title="Link to this heading"></a></h1>
<p>3. <strong>İstehsal verilənlər bazası istifadə edin:</strong>
<a href="#id99"><span class="problematic" id="id100">``</span></a><a href="#id101"><span class="problematic" id="id102">`</span></a>python
# Yaddaşda saxlanılanı verilənlər bazası ilə əvəz edin
import asyncpg</p>
<dl>
<dt>async def store_payment(payment_data):</dt><dd><p>conn = await asyncpg.connect(DATABASE_URL)
await conn.execute(</p>
<blockquote>
<div><p>“INSERT INTO payments (user_id, amount, stage_id, created_at) VALUES ($1, $2, $3, NOW())”,
payment_data[‘user_id’], payment_data[‘amount’], payment_data[‘stage_id’]</p>
</div></blockquote>
<p>)
await conn.close()</p>
</dd>
</dl>
<p><a href="#id103"><span class="problematic" id="id104">``</span></a><a href="#id105"><span class="problematic" id="id106">`</span></a></p>
<p>### Ödənişləri necə monitor etmək olar?</p>
<p><a href="#id107"><span class="problematic" id="id108">``</span></a><a href="#id109"><span class="problematic" id="id110">`</span></a>python
class PaymentMonitor:</p>
<blockquote>
<div><dl>
<dt>def __init__(self):</dt><dd><p>self.payment_stats = defaultdict(int)</p>
</dd>
<dt>async def log_payment(self, result):</dt><dd><p>self.payment_stats[‘total_payments’] += 1
self.payment_stats[‘total_amount’] += result.amount</p>
<p># Verilənlər bazasına log
await self.store_payment_log(result)</p>
<p># Yüksək həcm üçün xəbərdarlıq göndərin
if self.payment_stats[‘total_payments’] % 100 == 0:</p>
<blockquote>
<div><p>await self.send_volume_alert()</p>
</div></blockquote>
</dd>
<dt>async def get_stats(self):</dt><dd><p>return dict(self.payment_stats)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id111"><span class="problematic" id="id112">``</span></a><a href="#id113"><span class="problematic" id="id114">`</span></a></p>
<p>### Yüksək trafiki necə idarə etmək olar?</p>
<p><a href="#id115"><span class="problematic" id="id116">``</span></a><a href="#id117"><span class="problematic" id="id118">`</span></a>python
# Əlaqə hovuzu istifadə edin
import asyncpg</p>
<dl>
<dt>class DatabasePool:</dt><dd><dl>
<dt>def __init__(self, database_url: str):</dt><dd><p>self.pool = None
self.database_url = database_url</p>
</dd>
<dt>async def initialize(self):</dt><dd><dl class="simple">
<dt>self.pool = await asyncpg.create_pool(</dt><dd><p>self.database_url,
min_size=10,
max_size=20</p>
</dd>
</dl>
<p>)</p>
</dd>
<dt>async def execute(self, query, <a href="#id119"><span class="problematic" id="id120">*</span></a>args):</dt><dd><dl class="simple">
<dt>async with self.pool.acquire() as conn:</dt><dd><p>return await conn.execute(query, <a href="#id121"><span class="problematic" id="id122">*</span></a>args)</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id123"><span class="problematic" id="id124">``</span></a><a href="#id125"><span class="problematic" id="id126">`</span></a></p>
<p>## Problem Həlli</p>
<p>### Ödəniş göndərilmir</p>
<p><strong>Yoxlayın:</strong>
1. Bot token etibarlıdır
2. İstifadəçi botu başlatıb
3. Ödəniş mərhələsi mövcuddur
4. İstifadəçi ID düzgündür</p>
<p><a href="#id127"><span class="problematic" id="id128">``</span></a><a href="#id129"><span class="problematic" id="id130">`</span></a>python
# Ödəniş göndərməni debug et
async def debug_send_payment(user_id: int, stage_id: str):</p>
<blockquote>
<div><p># Mərhələnin mövcud olduğunu yoxlayın
stage = neonpay.get_payment_stage(stage_id)
if not stage:</p>
<blockquote>
<div><p>print(f”Mərhələ {stage_id} tapılmadı”)
return</p>
</div></blockquote>
<p># İstifadəçinin mövcud olduğunu yoxlayın
try:</p>
<blockquote>
<div><p>user = await bot.get_chat(user_id)
print(f”İstifadəçi tapıldı: {user.first_name}”)</p>
</div></blockquote>
<dl class="simple">
<dt>except Exception as e:</dt><dd><p>print(f”İstifadəçi tapılmadı: {e}”)
return</p>
</dd>
</dl>
<p># Ödənişi göndərin
try:</p>
<blockquote>
<div><p>await neonpay.send_payment(user_id, stage_id)
print(“Ödəniş uğurla göndərildi”)</p>
</div></blockquote>
<dl class="simple">
<dt>except Exception as e:</dt><dd><p>print(f”Ödəniş uğursuz oldu: {e}”)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id131"><span class="problematic" id="id132">``</span></a><a href="#id133"><span class="problematic" id="id134">`</span></a></p>
<p>### Ödəniş callback işləmir</p>
<p><strong>Yoxlayın:</strong>
1. <cite>&#64;neonpay.on_payment</cite> dekoratoru düzgün tətbiq edilib
2. Funksiya async-dir
3. Bot işləyir və yeniləmələri alır</p>
<p><a href="#id135"><span class="problematic" id="id136">``</span></a><a href="#id137"><span class="problematic" id="id138">`</span></a>python
# Ödəniş callback testi
&#64;neonpay.on_payment
async def test_payment_handler(result):</p>
<blockquote>
<div><p>print(f”Ödəniş callback işə düşdü: {result}”)
# Debug üçün burada breakpoint əlavə edin</p>
</div></blockquote>
<p><a href="#id139"><span class="problematic" id="id140">``</span></a><a href="#id141"><span class="problematic" id="id142">`</span></a></p>
<p>### Bot əmrlərə cavab vermir</p>
<p><strong>Yoxlayın:</strong>
1. Bot token düzgündür
2. Bot işləyir
3. Əmrlər düzgün qeydiyyatdan keçib
4. Şəbəkə bağlantısı</p>
<p><a href="#id143"><span class="problematic" id="id144">``</span></a><a href="#id145"><span class="problematic" id="id146">`</span></a>python
# Bot bağlantısını test et
async def test_bot():</p>
<blockquote>
<div><dl class="simple">
<dt>try:</dt><dd><p>me = await bot.get_me()
print(f”Bot işləyir: {me.first_name}”)</p>
</dd>
<dt>except Exception as e:</dt><dd><p>print(f”Bot bağlantısı uğursuz oldu: {e}”)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id147"><span class="problematic" id="id148">``</span></a><a href="#id149"><span class="problematic" id="id150">`</span></a></p>
<p>### Verilənlər bazası bağlantı problemləri</p>
<p><a href="#id151"><span class="problematic" id="id152">``</span></a><a href="#id153"><span class="problematic" id="id154">`</span></a>python
# Verilənlər bazası bağlantısını test et
async def test_database():</p>
<blockquote>
<div><dl class="simple">
<dt>try:</dt><dd><p>conn = await asyncpg.connect(DATABASE_URL)
result = await conn.fetchval(“SELECT 1”)
print(f”Verilənlər bazası bağlandı: {result}”)
await conn.close()</p>
</dd>
<dt>except Exception as e:</dt><dd><p>print(f”Verilənlər bazası bağlantısı uğursuz oldu: {e}”)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id155"><span class="problematic" id="id156">``</span></a><a href="#id157"><span class="problematic" id="id158">`</span></a></p>
<p>## Ümumi Problemlər</p>
<p>### “Ödəniş mərhələsi tapılmadı”</p>
<p>Bu, mövcud olmayan mərhələ üçün ödəniş göndərməyə çalışdığınızda baş verir:</p>
<p><a href="#id159"><span class="problematic" id="id160">``</span></a><a href="#id161"><span class="problematic" id="id162">`</span></a>python
# Mövcud mərhələləri yoxlayın
stages = neonpay.list_payment_stages()
print(f”Mövcud mərhələlər: {list(stages.keys())}”)</p>
<p># Əgər çatışmırsa mərhələ yaradın
if “premium” not in stages:</p>
<blockquote>
<div><p>stage = PaymentStage(“Premium”, “Premium giriş”, 25)
neonpay.create_payment_stage(“premium”, stage)</p>
</div></blockquote>
<p><a href="#id163"><span class="problematic" id="id164">``</span></a><a href="#id165"><span class="problematic" id="id166">`</span></a></p>
<p>### “İnvoice göndərmək uğursuz oldu”</p>
<p>Bu adətən deməkdir:
1. Bot token etibarsızdır
2. İstifadəçi botu başlatmayıb
3. İstifadəçi ID yanlışdır</p>
<p><a href="#id167"><span class="problematic" id="id168">``</span></a><a href="#id169"><span class="problematic" id="id170">`</span></a>python
# Invoice göndərməni debug et
async def debug_invoice(user_id: int, stage_id: str):</p>
<blockquote>
<div><dl>
<dt>try:</dt><dd><p># Bot məlumatlarını yoxlayın
me = await bot.get_me()
print(f”Bot: {me.first_name} (&#64;{me.username})”)</p>
<p># İstifadəçini yoxlayın
user = await bot.get_chat(user_id)
print(f”İstifadəçi: {user.first_name} (&#64;{user.username})”)</p>
<p># Ödənişi göndərin
await neonpay.send_payment(user_id, stage_id)</p>
</dd>
<dt>except Exception as e:</dt><dd><p>print(f”Xəta: {e}”)</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id171"><span class="problematic" id="id172">``</span></a><a href="#id173"><span class="problematic" id="id174">`</span></a></p>
<p>### “Ödəniş callback işə düşmür”</p>
<p>Əmin olun ki:
1. Funksiya <cite>&#64;neonpay.on_payment</cite> ilə dekorasiya edilib
2. Funksiya async-dir
3. Bot yeniləmələri alır</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">#</span> <span class="pre">Callback</span> <span class="pre">qeydiyyatını</span> <span class="pre">test</span> <span class="pre">et</span>
<span class="pre">stats</span> <span class="pre">=</span> <span class="pre">neonpay.get_stats()</span>
<span class="pre">print(f&quot;Callbacks</span> <span class="pre">qeydiyyatdan</span> <span class="pre">keçib:</span> <span class="pre">{stats['registered_callbacks']}&quot;)</span>
<span class="pre">`</span></code></p>
<p>## Kömək Almaq</p>
<p>### Haradan kömək ala bilərəm?</p>
<ol class="arabic simple">
<li><p><strong>Sənədləşmə</strong>: [examples](../../examples/) qovluğunu yoxlayın</p></li>
<li><p><strong>İcma</strong>: [Telegram icmamıza](<a class="reference external" href="https://t.me/neonpay_community">https://t.me/neonpay_community</a>) qoşulun</p></li>
<li><p><strong>Problemlər</strong>: [GitHub-da](<a class="reference external" href="https://github.com/Abbasxan/neonpay/issues">https://github.com/Abbasxan/neonpay/issues</a>) issue açın</p></li>
<li><p><strong>Email</strong>: [<a class="reference external" href="mailto:support&#37;&#52;&#48;neonpay&#46;com">support<span>&#64;</span>neonpay<span>&#46;</span>com</a>](<a class="reference external" href="mailto:support&#37;&#52;&#48;neonpay&#46;com">mailto:support<span>&#64;</span>neonpay<span>&#46;</span>com</a>) ünvanından dəstəklə əlaqə saxlayın</p></li>
</ol>
<p>### Xətaları necə bildirmək olar?</p>
<p>Xətaları bildirərkən, zəhmət olmasa daxil edin:
1. Python versiyası
2. NEONPAY versiyası
3. Bot kitabxanası və versiyası
4. Xəta mesajı və stack trace
5. Təkrar etmək üçün addımlar</p>
<p>### Funksiyaları necə tələb etmək olar?</p>
<p>Funksiya tələbləri xoş gəlinir! Zəhmət olmasa:
1. Funksiyanın artıq mövcud olub-olmadığını yoxlayın
2. İstifadə halını təsvir edin
3. Mümkünsə nümunə kod təqdim edin
4. GitHub-da issue açın</p>
<p>—</p>
<p><strong>Hələ də suallarınız var? [examples](../../examples/) qovluğunu yoxlayın və ya dəstəklə əlaqə saxlayın!</strong></p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="API.html" class="btn btn-neutral float-left" title=")" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="SECURITY.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, NEONPAY Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>