

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; NEONPAY 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title=")" href="FAQ.html" />
    <link rel="prev" title="–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è NEONPAY (–†—É—Å—Å–∫–∏–π)" href="README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            NEONPAY
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Language Selection:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../en/index.html">NEONPAY Documentation (English)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../en/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è NEONPAY (–†—É—Å—Å–∫–∏–π)</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#id4">–ò–Ω–¥–µ–∫—Å—ã –∏ —Ç–∞–±–ª–∏—Ü—ã</a></li>
<li class="toctree-l1"><a class="reference internal" href="../az/index.html">NEONPAY S…ôn…ôdl…ôri (Az…ôrbaycan)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../az/index.html#indekslr-v-cdvllr">ƒ∞ndeksl…ôr v…ô C…ôdv…ôll…ôr</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../en/README.html">NEONPAY Documentation (English)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../en/FAQ.html">)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../en/FAQ.html#id98">)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Documentation Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NEONPAY</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è NEONPAY (–†—É—Å—Å–∫–∏–π)</a></li>
      <li class="breadcrumb-item active">&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/ru/API.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p># NEONPAY API –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫</p>
<p>## –û–±–∑–æ—Ä</p>
<p>NEONPAY –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –∏ –º–æ—â–Ω—ã–π API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ Telegram Stars –≤ –≤–∞—à–∏ –±–æ—Ç—ã. API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è Telegram –±–æ—Ç–æ–≤.</p>
<p>## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã</p>
<p>### NeonPayCore</p>
<p>–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞–º–∏.</p>
<p>```python
from neonpay import NeonPayCore</p>
<p># –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
neonpay = NeonPayCore(bot_instance)
```</p>
<p>#### –ú–µ—Ç–æ–¥—ã</p>
<p>##### <cite>create_payment_stage(name, price, description=None, logo_url=None)</cite></p>
<p>–°–æ–∑–¥–∞–µ—Ç —ç—Ç–∞–ø –æ–ø–ª–∞—Ç—ã —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.</p>
<p><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:</strong>
- <cite>name</cite> (str): –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞/—É—Å–ª—É–≥–∏
- <cite>price</cite> (int): –¶–µ–Ω–∞ –≤ Telegram Stars
- <cite>description</cite> (str, optional): –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
- <cite>logo_url</cite> (str, optional): URL –ª–æ–≥–æ—Ç–∏–ø–∞</p>
<p><strong>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:</strong> <cite>PaymentStage</cite></p>
<p><strong>–ü—Ä–∏–º–µ—Ä:</strong>
```python
stage = neonpay.create_payment_stage(</p>
<blockquote>
<div><p>name=‚Äù–ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞‚Äù,
price=100,
description=‚Äù–î–æ—Å—Ç—É–ø –∫ –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏—è–º –Ω–∞ –º–µ—Å—è—Ü‚Äù,
logo_url=‚Äù<a class="reference external" href="https://example.com/logo.png">https://example.com/logo.png</a>‚Äù</p>
</div></blockquote>
<p>)
```</p>
<p>##### <cite>send_invoice(chat_id, payment_stage)</cite></p>
<p>–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω–≤–æ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.</p>
<p><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:</strong>
- <cite>chat_id</cite> (int): ID —á–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- <cite>payment_stage</cite> (PaymentStage): –≠—Ç–∞–ø –æ–ø–ª–∞—Ç—ã</p>
<p><strong>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:</strong> <cite>PaymentResult</cite></p>
<p><strong>–ü—Ä–∏–º–µ—Ä:</strong>
```python
result = await neonpay.send_invoice(user_id, stage)
if result.success:</p>
<blockquote>
<div><p>print(‚Äú–ò–Ω–≤–æ–π—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ‚Äù)</p>
</div></blockquote>
<p>```</p>
<p>##### <cite>handle_successful_payment(payment_data)</cite></p>
<p>–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –ø–ª–∞—Ç–µ–∂.</p>
<p><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:</strong>
- <cite>payment_data</cite>: –î–∞–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∞ –æ—Ç Telegram</p>
<p><strong>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:</strong> <cite>PaymentResult</cite></p>
<p>##### <cite>refund_payment(payment_id, reason=None)</cite></p>
<p>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è).</p>
<p><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:</strong>
- <cite>payment_id</cite> (str): ID –ø–ª–∞—Ç–µ–∂–∞
- <cite>reason</cite> (str, optional): –ü—Ä–∏—á–∏–Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞</p>
<p><strong>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:</strong> <cite>PaymentResult</cite></p>
<p>### PaymentStage</p>
<p>–ö–ª–∞—Å—Å –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —ç—Ç–∞–ø–∞ –æ–ø–ª–∞—Ç—ã.</p>
<p><strong>–ê—Ç—Ä–∏–±—É—Ç—ã:</strong>
- <cite>name</cite> (str): –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
- <cite>price</cite> (int): –¶–µ–Ω–∞ –≤ Stars
- <cite>description</cite> (str): –û–ø–∏—Å–∞–Ω–∏–µ
- <cite>logo_url</cite> (str): URL –ª–æ–≥–æ—Ç–∏–ø–∞
- <cite>created_at</cite> (datetime): –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è</p>
<p>### PaymentResult</p>
<p>–ö–ª–∞—Å—Å –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–∞.</p>
<p><strong>–ê—Ç—Ä–∏–±—É—Ç—ã:</strong>
- <cite>success</cite> (bool): –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏
- <cite>payment_id</cite> (str): ID –ø–ª–∞—Ç–µ–∂–∞
- <cite>message</cite> (str): –°–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
- <cite>data</cite> (dict): –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</p>
<p>## –§–∞–±—Ä–∏–∫–∞ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤</p>
<p>### AdapterFactory</p>
<p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è –≤–∞—à–µ–≥–æ –±–æ—Ç–∞.</p>
<p>```python
from neonpay import AdapterFactory</p>
<p># –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –±–æ—Ç–∞
neonpay = AdapterFactory.create_neonpay(bot_instance)
```</p>
<p>#### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏</p>
<ul class="simple">
<li><p><strong>Aiogram v3</strong>: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Ç–∏–ø—É <cite>Bot</cite></p></li>
<li><p><strong>Pyrogram v2+</strong>: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Ç–∏–ø—É <cite>Client</cite></p></li>
<li><p><strong>python-telegram-bot</strong>: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Ç–∏–ø—É <cite>Application</cite></p></li>
<li><p><strong>pyTelegramBotAPI</strong>: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Ç–∏–ø—É <cite>TeleBot</cite></p></li>
<li><p><strong>Raw API</strong>: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <cite>RawApiAdapter</cite> –Ω–∞–ø—Ä—è–º—É—é</p></li>
</ul>
<p>## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</p>
<p>### –ò—Å–∫–ª—é—á–µ–Ω–∏—è</p>
<p>```python
from neonpay.errors import (</p>
<blockquote>
<div><p>NeonPayError,
PaymentError,
InvalidPaymentStageError,
UnsupportedBotTypeError</p>
</div></blockquote>
<p>)</p>
<dl class="simple">
<dt>try:</dt><dd><p>result = await neonpay.send_invoice(user_id, stage)</p>
</dd>
<dt>except PaymentError as e:</dt><dd><p>print(f‚Äù–û—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–∞: {e}‚Äù)</p>
</dd>
<dt>except NeonPayError as e:</dt><dd><p>print(f‚Äù–û–±—â–∞—è –æ—à–∏–±–∫–∞ NEONPAY: {e}‚Äù)</p>
</dd>
</dl>
<p>```</p>
<p>## –£—Ç–∏–ª–∏—Ç—ã</p>
<p>### PaymentValidator</p>
<p>–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π.</p>
<p>```python
from neonpay.utils import PaymentValidator</p>
<p># –í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω—ã
if PaymentValidator.validate_price(100):</p>
<blockquote>
<div><p>print(‚Äú–¶–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞‚Äù)</p>
</div></blockquote>
<p># –í–∞–ª–∏–¥–∞—Ü–∏—è —ç—Ç–∞–ø–∞ –æ–ø–ª–∞—Ç—ã
if PaymentValidator.validate_payment_stage(stage):</p>
<blockquote>
<div><p>print(‚Äú–≠—Ç–∞–ø –æ–ø–ª–∞—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω‚Äù)</p>
</div></blockquote>
<p>```</p>
<p>### NeonPayLogger</p>
<p>–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.</p>
<p>```python
from neonpay.utils import NeonPayLogger</p>
<p>logger = NeonPayLogger(‚ÄúMyBot‚Äù)
logger.log_payment_attempt(user_id, stage.name, stage.price)
logger.log_payment_success(payment_id, user_id)
```</p>
<p>### PaymentHelper</p>
<p>–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.</p>
<p>```python
from neonpay.utils import PaymentHelper</p>
<p># –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã
formatted = PaymentHelper.format_price(100)  # ‚Äú100 ‚≠ê‚Äù</p>
<p># –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID –ø–ª–∞—Ç–µ–∂–∞
payment_id = PaymentHelper.generate_payment_id()</p>
<p># –í–∞–ª–∏–¥–∞—Ü–∏—è URL
if PaymentHelper.is_valid_url(‚Äù<a class="reference external" href="https://example.com/logo.png">https://example.com/logo.png</a>‚Äù):</p>
<blockquote>
<div><p>print(‚ÄúURL –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω‚Äù)</p>
</div></blockquote>
<p>```</p>
<p>## Middleware —Å–∏—Å—Ç–µ–º–∞</p>
<p>### PaymentMiddleware</p>
<p>–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è middleware.</p>
<p>```python
from neonpay.middleware import PaymentMiddleware</p>
<dl class="simple">
<dt>class LoggingMiddleware(PaymentMiddleware):</dt><dd><dl class="simple">
<dt>async def before_payment(self, payment_stage, context):</dt><dd><p>print(f‚Äù–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–ª–∞—Ç–µ–∂: {payment_stage.name}‚Äù)
return payment_stage, context</p>
</dd>
<dt>async def after_payment(self, result, context):</dt><dd><p>print(f‚Äù–ü–ª–∞—Ç–µ–∂ –∑–∞–≤–µ—Ä—à–µ–Ω: {result.success}‚Äù)
return result</p>
</dd>
</dl>
</dd>
</dl>
<p># –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
neonpay.add_middleware(LoggingMiddleware())
```</p>
<p>### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ middleware</p>
<p>```python
from neonpay.middleware import (</p>
<blockquote>
<div><p>LoggingMiddleware,
ValidationMiddleware,
WebhookMiddleware</p>
</div></blockquote>
<p>)</p>
<p># –î–æ–±–∞–≤–ª–µ–Ω–∏–µ middleware
neonpay.add_middleware(LoggingMiddleware())
neonpay.add_middleware(ValidationMiddleware())
neonpay.add_middleware(WebhookMiddleware(‚Äù<a class="reference external" href="https://mysite.com/webhook">https://mysite.com/webhook</a>‚Äù))
```</p>
<p>## Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</p>
<p>### WebhookHandler</p>
<p>–û–±—Ä–∞–±–æ—Ç–∫–∞ webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.</p>
<p>```python
from neonpay.webhooks import WebhookHandler</p>
<p>handler = WebhookHandler(secret_key=‚Äùyour_secret_key‚Äù)</p>
<p># –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook
&#64;app.post(‚Äú/webhook‚Äù)
async def handle_webhook(request):</p>
<blockquote>
<div><dl>
<dt>if handler.verify_signature(request.headers, request.body):</dt><dd><p>event = handler.parse_event(request.body)
if event.type == ‚Äúpayment.successful‚Äù:</p>
<blockquote>
<div><p># –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞
print(f‚Äù–ü–ª–∞—Ç–µ–∂ {event.payment_id} —É—Å–ø–µ—à–µ–Ω‚Äù)</p>
</div></blockquote>
</dd>
</dl>
<p>return {‚Äústatus‚Äù: ‚Äúok‚Äù}</p>
</div></blockquote>
<p>```</p>
<p>## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</p>
<p>### –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Å Aiogram</p>
<p>```python
from aiogram import Bot, Dispatcher, types
from neonpay import AdapterFactory</p>
<p>bot = Bot(token=‚ÄùYOUR_BOT_TOKEN‚Äù)
dp = Dispatcher()
neonpay = AdapterFactory.create_neonpay(bot)</p>
<p>&#64;dp.message(commands=[‚Äúbuy‚Äù])
async def buy_handler(message: types.Message):</p>
<blockquote>
<div><dl class="simple">
<dt>stage = neonpay.create_payment_stage(</dt><dd><p>name=‚Äù–ü—Ä–µ–º–∏—É–º –¥–æ—Å—Ç—É–ø‚Äù,
price=50,
description=‚Äù–î–æ—Å—Ç—É–ø –∫ –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏—è–º‚Äù</p>
</dd>
</dl>
<p>)</p>
<p>result = await neonpay.send_invoice(message.chat.id, stage)
if not result.success:</p>
<blockquote>
<div><p>await message.answer(‚Äú–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞‚Äù)</p>
</div></blockquote>
</div></blockquote>
<p>&#64;dp.pre_checkout_query()
async def pre_checkout_handler(query: types.PreCheckoutQuery):</p>
<blockquote>
<div><p>await query.answer(ok=True)</p>
</div></blockquote>
<p>&#64;dp.message(content_types=types.ContentType.SUCCESSFUL_PAYMENT)
async def successful_payment_handler(message: types.Message):</p>
<blockquote>
<div><p>result = await neonpay.handle_successful_payment(message.successful_payment)
await message.answer(‚Äú–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É! üéâ‚Äù)</p>
</div></blockquote>
<p>```</p>
<p>### –ü—Ä–∏–º–µ—Ä —Å Pyrogram</p>
<p>```python
from pyrogram import Client, filters
from neonpay import AdapterFactory</p>
<p>app = Client(‚Äúmy_bot‚Äù, bot_token=‚ÄùYOUR_BOT_TOKEN‚Äù)
neonpay = AdapterFactory.create_neonpay(app)</p>
<p>&#64;app.on_message(filters.command(‚Äúbuy‚Äù))
async def buy_handler(client, message):</p>
<blockquote>
<div><dl class="simple">
<dt>stage = neonpay.create_payment_stage(</dt><dd><p>name=‚ÄùVIP —Å—Ç–∞—Ç—É—Å‚Äù,
price=100,
description=‚ÄùVIP —Å—Ç–∞—Ç—É—Å –Ω–∞ –º–µ—Å—è—Ü‚Äù</p>
</dd>
</dl>
<p>)</p>
<p>result = await neonpay.send_invoice(message.chat.id, stage)
if result.success:</p>
<blockquote>
<div><p>await message.reply(‚Äú–ò–Ω–≤–æ–π—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!‚Äù)</p>
</div></blockquote>
</div></blockquote>
<p>&#64;app.on_message(filters.successful_payment)
async def payment_handler(client, message):</p>
<blockquote>
<div><p>result = await neonpay.handle_successful_payment(message.successful_payment)
await message.reply(‚Äú–ü–ª–∞—Ç–µ–∂ –ø–æ–ª—É—á–µ–Ω! ‚úÖ‚Äù)</p>
</div></blockquote>
<p>```</p>
<p>## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏</p>
<p>### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</p>
<ol class="arabic simple">
<li><p><strong>–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö</strong>: –í—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</p></li>
<li><p><strong>–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</strong>: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ try-catch –±–ª–æ–∫–∏</p></li>
<li><p><strong>–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ</strong>: –í–µ–¥–∏—Ç–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</p></li>
<li><p><strong>Webhook –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</strong>: –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–¥–ø–∏—Å–∏ webhook</p></li>
</ol>
<p>### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</p>
<ol class="arabic simple">
<li><p><strong>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å</strong>: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ async/await</p></li>
<li><p><strong>–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ</strong>: –ö—ç—à–∏—Ä—É–π—Ç–µ —ç—Ç–∞–ø—ã –æ–ø–ª–∞—Ç—ã</p></li>
<li><p><strong>Middleware</strong>: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ middleware –¥–ª—è –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏</p></li>
<li><p><strong>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</strong>: –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</p></li>
</ol>
<p>### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç</p>
<ol class="arabic simple">
<li><p><strong>–ü–æ–Ω—è—Ç–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è</strong>: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–µ—Ç–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤</p></li>
<li><p><strong>–õ–æ–≥–æ—Ç–∏–ø—ã</strong>: –î–æ–±–∞–≤–ª—è–π—Ç–µ –ª–æ–≥–æ—Ç–∏–ø—ã –¥–ª—è —É–∑–Ω–∞–≤–∞–µ–º–æ—Å—Ç–∏</p></li>
<li><p><strong>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</strong>: –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ —Å—Ç–∞—Ç—É—Å–µ</p></li>
<li><p><strong>–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</strong>: –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö</p></li>
</ol>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="README.html" class="btn btn-neutral float-left" title="–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è NEONPAY (–†—É—Å—Å–∫–∏–π)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="FAQ.html" class="btn btn-neutral float-right" title=")" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, NEONPAY Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>